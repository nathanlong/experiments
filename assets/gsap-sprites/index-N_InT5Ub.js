var n=Object.defineProperty;var h=(i,e,t)=>e in i?n(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>(h(i,typeof e!="symbol"?e+"":e,t),t);import"../modulepreload-polyfill-9p4a8sJU.js";import{g as a,S as l}from"../vendor-DES_rqDc.js";a.registerPlugin(l);let o=[];class m{constructor(e){this.el=e,this.timeline=null,this.animate()}animate(){this.timeline=a.timeline().to(".star-image",{x:-1170,duration:.75,repeat:-1,ease:"steps(9)"})}cleanUp(){this.timeline.kill()}}class c{constructor(e){s(this,"frames",60);s(this,"rows",10);s(this,"columns",6);s(this,"frame_width",300);s(this,"frame_height",350);this.el=e,this.timeline=null,this.animate()}generateXPosition(){let e=[];for(let t=0;t<this.frames;t++){let r=t%this.columns*this.frame_width*-1;e.push(r)}return e}generateYPosition(){let e=[];for(let t=0;t<this.frames;t++){let r=Math.max(0,Math.floor(t/this.columns))*this.frame_height*-1;e.push(r)}return e}animate(){this.timeline=a.timeline().to(".phone-image",{keyframes:{x:this.generateXPosition(),y:this.generateYPosition()},ease:`steps(${this.frames-1})`,scrollTrigger:{trigger:".scroll",start:"top 30%",end:"bottom 30%",scrub:1}})}cleanUp(){this.timeline.kill()}}class g{constructor(e){s(this,"images",[]);s(this,"frames",147);s(this,"currentFrame",e=>`https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/${(e+1).toString().padStart(4,"0")}.jpg`);s(this,"airpods",{frame:0});s(this,"render",()=>{this.context.clearRect(0,0,this.el.width,this.el.height),this.context.drawImage(this.images[this.airpods.frame],0,0)});this.el=e,this.timeline=null,this.context=this.el.getContext("2d"),this.el.width=1158,this.el.height=770,this.buildImages(),this.animate()}buildImages(){for(let e=0;e<this.frames;e++){const t=new Image;t.src=this.currentFrame(e),this.images.push(t)}this.images[0].onload=this.render}animate(){this.timeline=a.timeline().to(this.airpods,{frame:this.frames-1,snap:"frame",ease:"none",scrollTrigger:{trigger:".canvas-container",start:"top",end:"bottom",scrub:.5},onUpdate:this.render})}cleanUp(){this.timeline.kill()}}const p=[...document.querySelectorAll("[data-module]")];p.forEach((i,e)=>{i.dataset.module.split(" ").forEach(function(t){switch(t){case"star":o.push(new m(i));break;case"phone":o.push(new c(i));break;case"airpods":o.push(new g(i));break}})});
